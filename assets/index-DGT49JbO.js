(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const a=document.getElementById("task-input"),y=document.getElementById("task-priority"),g=document.getElementById("add-btn"),d=document.getElementById("important-list"),u=document.getElementById("due-list"),f=document.getElementById("normal-list"),c="todo-tasks";function l(){const o=JSON.parse(localStorage.getItem(c)||"[]"),e=new Date().toISOString().slice(0,10);return o.filter(t=>t.date===e)}function h(o){localStorage.setItem(c,JSON.stringify(o))}function p(){const o=l();[d,u,f].forEach(e=>e.innerHTML=""),o.forEach(e=>{const t=document.createElement("li");t.className=`${e.priority} ${e.done?"completed":""}`,t.innerHTML=`
      <span>${e.text}</span>
      <div>
        <!-- 使用 Font Awesome 的 ✔️ 圖示 -->
        <button class="complete-btn"
                aria-label="${e.done?"還原任務":"標示為已完成"}">
          <i class="${e.done?"fas fa-undo":"fas fa-check"}" aria-hidden="true"></i>
        </button>
      </div>`,t.querySelector(".complete-btn").onclick=()=>{e.done=!e.done,m(o)},e.priority==="important"?d.appendChild(t):e.priority==="due"?u.appendChild(t):f.appendChild(t)})}function m(o){const t=JSON.parse(localStorage.getItem(c)||"[]").filter(i=>i.date!==new Date().toISOString().slice(0,10));h([...t,...o]),p()}g.onclick=()=>{const o=a.value.trim();if(!o)return;const e=l();e.push({text:o,priority:y.value,done:!1,date:new Date().toISOString().slice(0,10)}),m(e),a.value=""};setInterval(()=>{const o=new Date;o.getHours()===17&&o.getMinutes()===30&&l().filter(t=>!t.done&&(t.priority==="important"||t.priority==="due")).length&&alert("尚有高優先任務待完成，建議留到明日再做。")},6e4);p();
